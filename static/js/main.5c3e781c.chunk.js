(this.webpackJsonpsentry=this.webpackJsonpsentry||[]).push([[0],{111:function(e,t){},113:function(e,t){},143:function(e,t){},169:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),r=s(87),c=s.n(r),i=(s(94),s(88)),l=s(2),o=s(4),d=s.n(o),u=s(23),j=s(3),b=(s(47),s(172)),h=s(170),O=s(171),p=s(173),f={row1BgGrey:{backgroundColor:"#F1FAEE",padding:2,margin:8,minWidth:1e3},rowTitle:{width:"100%",height:"40%",backgroundColor:"#457B9D"},title:{heigth:"40%",padding:2,marginLeft:10,fontSize:28,textAlign:"left",alignItems:"left",color:"#f1faee"},subtitle:{width:"100%",height:"30%",backgroundColor:"#457B9D"},textSubtitle:{heigth:"20%",paddingLeft:20,textAlign:"left",whiteSpace:"nowrap",overflow:"hidden",color:"#f1faee"},rowError:{heigth:"30%",padding:2,margin:0,textAlign:"left",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden"},col2:{},colTitle:{width:"100%",padding:0,marginLeft:10,fontSize:14,textAlign:"center",color:"#1d3557"},rowValue:{padding:0,margin:0,fontSize:14,textAlign:"center",color:"#1d3557"},rowCard2:{backgroundColor:"#a8dadc",padding:2,margin:8}},x=s(0),g=function(e){var t,s,n,a,r,c,i,l=e.issue,o=e.order,d=e.updated,u=f.row1BgGrey,j=f.rowTitle,b=f.title,g=f.subtitle,m=f.textSubtitle,v=f.rowError,y=f.col2,w=f.colTitle,S=f.rowValue;return Object(x.jsxs)(h.a,{style:u,children:[Object(x.jsx)(O.a,{style:{minWidth:"10%",marginLeft:0},children:Object(x.jsx)("a",{href:l.permalink.toString(),target:"_blank",rel:"noreferrer noopener",children:Object(x.jsx)(p.a,{variant:d,children:"Ver no Sentry"})})}),Object(x.jsxs)(O.a,{style:{minWidth:"50%",marginLeft:0},children:[Object(x.jsx)(h.a,{style:j,children:Object(x.jsx)("text",{style:b,children:"".concat(o," - ").concat((null===(t=l.metadata)||void 0===t?void 0:t.type)?null===(s=l.metadata)||void 0===s?void 0:s.type:"<Unknown>")})}),Object(x.jsx)(h.a,{style:g,children:Object(x.jsx)("text",{style:m,children:l.culprit})}),Object(x.jsx)(h.a,{style:v,children:null===(n=l.metadata)||void 0===n?void 0:n.value})]}),Object(x.jsxs)(O.a,{style:y,children:[Object(x.jsx)(h.a,{style:{width:"100%",height:"40%"},children:Object(x.jsx)("text",{style:w,children:Object(x.jsx)("b",{children:"Primeira"})})}),Object(x.jsx)(h.a,{style:S,children:"".concat(null===(a=l.firstSeen)||void 0===a?void 0:a.substr(0,10)," \n ").concat(null===(r=l.firstSeen)||void 0===r?void 0:r.substr(11,5),"h")})]}),Object(x.jsxs)(O.a,{style:y,children:[Object(x.jsx)(h.a,{style:{width:"100%",height:"40%"},children:Object(x.jsx)("text",{style:w,children:Object(x.jsx)("b",{children:"\xdaltima"})})}),Object(x.jsx)(h.a,{style:S,children:"".concat(null===(c=l.lastSeen)||void 0===c?void 0:c.substr(0,10)," \n ").concat(null===(i=l.lastSeen)||void 0===i?void 0:i.substr(11,5),"h")})]}),Object(x.jsxs)(O.a,{style:y,children:[Object(x.jsx)(h.a,{style:{width:"100%",height:"40%"},children:Object(x.jsx)("text",{style:w,children:Object(x.jsx)("b",{children:"All Users"})})}),Object(x.jsx)(h.a,{style:S,children:"".concat(l.userCount)})]}),Object(x.jsxs)(O.a,{style:y,children:[Object(x.jsx)(h.a,{style:{width:"100%",height:"40%"},children:Object(x.jsx)("text",{style:w,children:Object(x.jsx)("b",{children:"All Events"})})}),Object(x.jsx)(h.a,{style:S,children:"".concat(l.count)})]})]})},m=function(e){var t=e.setDbKey;return Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Insira o dbKey"}),Object(x.jsx)("textarea",{style:{width:"90%",textAlign:"center",margin:20,marginLeft:60},className:"form-control",rows:"1",onChange:function(e){40===e.target.value.length&&t(e.target.value)}})]})},v=function(e){var t=e.setNewJson;return Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("a",{href:"https://sentry.io/api/0/projects/prit-app/prit-app-business/issues/",target:"_blank",rel:"noreferrer noopener",children:"New Json from https://sentry.io/api/0/projects/prit-app/prit-app-business/issues/"}),Object(x.jsx)("textarea",{style:{width:"90%",textAlign:"center",margin:20,marginLeft:60},className:"form-control",rows:"1",onChange:function(e){t(JSON.parse(e.target.value)),e.target.value="Ok"}})]})},y=function(e){var t=e.issueId,s=e.setNewDetails,n=e.disabled;return Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("a",{href:"https://sentry.io/api/0/issues/".concat(t,"/hashes/"),target:"_blank",rel:"noreferrer noopener",children:"New Details from https://sentry.io/api/0/issues/".concat(t,"/hashes/")}),Object(x.jsx)("textarea",{style:{width:"90%",textAlign:"center",margin:20,marginLeft:60},className:"form-control",disabled:n,rows:"1",onChange:function(e){s(JSON.parse(e.target.value)),e.target.value="Ok"}})]})},w=function(){var e=Object(u.a)(d.a.mark((function e(t,s){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.save();case 3:n=e.sent,console.log("New object created with objectId: "+n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("Failed to create new object, with error code: "+e.t0.message);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,s){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(d.a.mark((function e(t,s){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0;try{s.forEach((function(e){if(e.updated){var s,n=new t.Object("issuesList");n.set("id",e.objectId||null),n.set("issueId",e.issueId),n.set("shareId",e.shareId),n.set("shortId",e.shortId),n.set("title",e.title),n.set("culprit",e.culprit),n.set("permalink",e.permalink),n.set("logger",e.logger),n.set("level",e.level),n.set("status",e.status),n.set("statusDetails",e.statusDetails),n.set("isPublic",e.isPublic),n.set("platform",e.platform),n.set("projectName",(null===(s=e.project)||void 0===s?void 0:s.name)||""),n.set("type",e.type),n.set("numComments",e.numComments),n.set("assignedTo",e.assignedTo),n.set("isBookmarked",e.isBookmarked),n.set("isSubscribed",e.isSubscribed),n.set("subscriptionDetails",e.subscriptionDetails),n.set("hasSeen",e.hasSeen),n.set("annotations",e.annotations),n.set("isUnhandled",e.isUnhandled),n.set("count",e.count),n.set("userCount",e.userCount),n.set("firstSeen",e.firstSeen),n.set("lastSeen",e.lastSeen),n.set("stats",e.stats),n.set("metadata",{value:e.metadata.value,type:e.metadata.type,filename:e.metadata.filename,function:e.metadata.function,display_title_with_tree_label:e.metadata.display_title_with_tree_label}),w(n,0)}}))}catch(n){console.log("erro",n)}alert("".concat(0," issues atualizados com sucesso!"));case 3:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(d.a.mark((function e(t,s,n,a,r){var c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=function(){var e=Object(u.a)(d.a.mark((function e(t){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.save();case 3:s=e.sent,console.log("New object created with objectId: ",s),r(null),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),alert("Failed to create new object, with error code: "+e.t0.message),console.log("erro ao salvar: ",e.t0);case 12:case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();try{(i=new t.Object("issuesDetails")).set("id",s.objectId||null),i.set("issueId",s.id),i.set("os",s.os),i.set("tags",s.tags),i.set("user",s.user),i.set("device",s.device),i.set("lastSeen",n),c(i),a(i)}catch(l){console.log("erro",l)}case 2:case"end":return e.stop()}}),e)})));return function(t,s,n,a,r){return e.apply(this,arguments)}}(),N=function(e){var t=e.issueId,a=e.cleanNewDetails,r=e.showCard,c=e.setNewDetails,i=e.detailsData,l=e.setShowCard,o=e.lastSeen,d=e.edit,u=f.colTitle,g=f.rowValue,m=f.rowCard2,v=s(60),w=Object(n.useState)(!1),S=Object(j.a)(w,2),N=S[0],k=S[1],C=Object(n.useState)(null),D=Object(j.a)(C,2),A=D[0],E=D[1],_=Object(n.useState)(null),L=Object(j.a)(_,2),J=L[0],T=L[1],F=Object(n.useState)(i),B=Object(j.a)(F,2),U=B[0],z=B[1];Object(n.useEffect)((function(){z(i)}),[i]),Object(n.useEffect)((function(){if(a.id===t){var e=a;U&&(e.objectId=U.objectId),E(e)}}),[a]),Object(n.useEffect)((function(){A&&(I(v,A,o,T,E),k(!0))}),[A]),Object(n.useEffect)((function(){if(J){var e=JSON.parse(JSON.stringify(J));z({device:e.device,issueId:e.issueId,os:e.os,tags:e.tags,user:e.user})}}),[J]);var M=function(e){var t=e.data,s=e.title;return Object(x.jsxs)(b.a,{children:[Object(x.jsx)(h.a,{children:Object(x.jsx)("text",{style:u,children:Object(x.jsx)("b",{children:s})})}),t&&Object.keys(t).map((function(e){var s="memory_size"===e||"free_memory"===e||"storage_size"===e||"free_storage"===e,n=null===t[e]?"null":s?Math.floor(t[e]/1e6)+" Mb":t[e].toString();return Object(x.jsxs)(h.a,{children:[Object(x.jsx)(O.a,{style:g,children:Object(x.jsx)("text",{style:u,children:Object(x.jsx)("b",{children:e})})}),Object(x.jsx)(O.a,{style:g,children:Object(x.jsx)("text",{style:u,children:n})})]})}))]})},V=function(e){var t=e.tags;return Object(x.jsxs)(b.a,{children:[Object(x.jsx)(h.a,{children:Object(x.jsx)("text",{style:u,children:Object(x.jsx)("b",{children:"TAGS DATA"})})}),t.map((function(e){return Object(x.jsxs)(h.a,{children:[Object(x.jsx)(O.a,{children:Object(x.jsx)("text",{style:u,children:Object(x.jsx)("b",{children:e.key})})}),Object(x.jsx)(O.a,{style:g,children:Object(x.jsx)("text",{style:u,children:e.value})})]})}))]})};return Object(x.jsxs)(b.a,{children:[r!==t&&Object(x.jsx)(p.a,{style:{width:"100%",marginTop:20,marginBottom:8},variant:"primary",onClick:function(){return l(t)},children:"MoreInfo"}),r===t&&Object(x.jsxs)(O.a,{style:{width:"90%"},children:[U&&Object(x.jsxs)(b.a,{children:[Object(x.jsxs)(h.a,{style:{minWidth:"60%"},children:[Object(x.jsx)(O.a,{style:{width:"50%"},children:Object(x.jsx)(h.a,{style:m,children:Object(x.jsx)(M,{data:U.os,title:"OS INFORMATION"})})}),Object(x.jsx)(O.a,{style:{width:"50%"},children:Object(x.jsx)(h.a,{style:m,children:Object(x.jsx)(M,{data:U.user,title:"USER INFORMATION"})})})]}),Object(x.jsxs)(h.a,{style:{minWidth:"60%"},children:[Object(x.jsx)(O.a,{style:{width:"50%"},children:Object(x.jsx)(h.a,{style:m,children:Object(x.jsx)(V,{tags:U.tags})})}),Object(x.jsx)(O.a,{style:{width:"50%"},children:Object(x.jsx)(h.a,{style:m,children:Object(x.jsx)(M,{data:U.device,title:"DEVICE INFORMATION"})})})]})]}),!U&&Object(x.jsx)(h.a,{children:Object(x.jsx)("text",{children:"Nenhum dado para exibir"})}),d&&Object(x.jsx)(y,{issueId:t,setNewDetails:c,disabled:N})]})]})},k=function(e){var t=e.edit,a=void 0!==t&&t,r=Object(n.useState)([]),c=Object(j.a)(r,2),i=c[0],l=c[1],o=Object(n.useState)([]),y=Object(j.a)(o,2),w=y[0],I=y[1],k=Object(n.useState)([]),C=Object(j.a)(k,2),D=C[0],A=(C[1],Object(n.useState)(null)),E=Object(j.a)(A,2),_=E[0],L=E[1],J=Object(n.useState)([]),T=Object(j.a)(J,2),F=T[0],B=T[1],U=Object(n.useState)([]),z=Object(j.a)(U,2),M=z[0],V=z[1],P=Object(n.useState)([]),R=Object(j.a)(P,2),W=R[0],G=R[1],K=Object(n.useState)(!1),Q=Object(j.a)(K,2),Y=Q[0],q=Q[1],H=f.row1BgGrey,X=s(60),Z=function(){var e=Object(u.a)(d.a.mark((function e(){var t,s,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X.Object.extend("issuesList"),s=new X.Query(t),e.prev=2,e.next=5,s.find();case 5:n=e.sent,a=JSON.parse(JSON.stringify(n)),l(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Error while fetching issuesList",e.t0);case 13:case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(u.a)(d.a.mark((function e(){var t,s,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X.Object.extend("issuesDetails"),s=new X.Query(t),e.prev=2,e.next=5,s.find();case 5:n=e.sent,a=JSON.parse(JSON.stringify(n)),B(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Error while fetching issuesList",e.t0);case 13:case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){_&&(X.initialize("AOIkbVtbBP9IfqV80DyYBCNul4DYR03MNcikFamg",_),X.serverURL="https://parseapi.back4app.com/",Z(),$())}),[_]),Object(n.useEffect)((function(){0===w.length||Array.isArray(w)&&w.length>0&&w[0].id||I([])}),[w]),Object(n.useEffect)((function(){0===M.length||Array.isArray(M)&&M.length>0&&M[0].latestEvent&&M[0].latestEvent.groupID===Y?function(e,t){if(!e.length)return null;var s=e[0].latestEvent;t({id:s.groupID,device:s.contexts.device,os:s.contexts.os,tags:s.tags,user:s.user})}(M,G):(V([]),alert("Dados inv\xe1lidos!"))}),[M]),Object(x.jsxs)("div",{style:{width:"100%",textAlign:"center",padding:20},children:[Object(x.jsx)("h1",{children:"Issues from Sentry"}),!_&&Object(x.jsx)(m,{setDbKey:L}),_&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h4",{children:["Updated at ","01/01 - 00:00h"]}),Object(x.jsx)(b.a,{children:i.sort((function(e,t){return new Date(t.lastSeen)-new Date(e.lastSeen)})).map((function(e,t){var s=F.find((function(t){return t.issueId===e.issueId})),n=s&&e.lastSeen===s.lastSeen?"success":"danger";return Object(x.jsxs)(h.a,{style:H,children:[Object(x.jsx)(O.a,{style:{minWidth:"60%"},children:Object(x.jsx)(g,{issue:e,order:t+1,updated:n})}),Object(x.jsx)(N,{detailsData:s,showCard:Y,setShowCard:q,issueId:e.issueId,cleanNewDetails:W,setNewDetails:V,resultIssues:D,lastSeen:e.lastSeen,edit:a})]})}))}),a&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(v,{setNewJson:I}),Object(x.jsx)(p.a,{variant:"primary",onClick:function(){return function(e,t,s){var n=s,a=JSON.parse(JSON.stringify(e));n.forEach((function(e,t){var s=a.findIndex((function(t){return t.issueId===e.id}));console.log("".concat(t," - issue Id: ").concat(e.id," / duplicado: ").concat(-1!==s," new: ").concat(e.lastSeen," old: ").concat(-1!==s?a[s].lastSeen:"")),-1!==s&&e.lastSeen===a[s].lastSeen?(a[s].updated=!1,a.splice(s,1),console.log("updated false")):(console.log("updated true - novo"),e.updated=!0,-1!==s&&(console.log("updated true  - atualizado"),e.objectId=a[s].objectId,a.splice(s,1)),a.push(e))})),a.forEach((function(e){var s,n=e.attributes?e.attributes:e;t.push({objectId:e.objectId||"",issueId:n.issueId||n.id,title:n.title,culprit:n.culprit,permalink:n.permalink,level:n.level,platform:n.platform,projectName:(null===(s=n.project)||void 0===s?void 0:s.name)||"",type:n.type,metadata:{value:n.metadata.value,type:n.metadata.type,filename:n.metadata.filename,function:n.metadata.function,display_title_with_tree_label:n.metadata.display_title_with_tree_label},hasSeen:n.hasSeen,isUnhandled:n.isUnhandled,count:n.count,userCount:n.userCount,firstSeen:n.firstSeen,lastSeen:n.lastSeen,updated:n.updated})}))}(i,D,w)},children:"Comparar"}),Object(x.jsx)(p.a,{variant:"primary",onClick:function(){return S(X,D)},children:"Save Issues List"})]})]})]})},C=function(){return Object(x.jsx)(i.a,{children:Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(l.c,{children:[Object(x.jsx)(l.a,{path:"/",element:Object(x.jsx)(k,{})}),Object(x.jsx)(l.a,{path:"/issues",element:Object(x.jsx)(k,{})}),Object(x.jsx)(l.a,{path:"/prit-sentry",element:Object(x.jsx)(k,{})}),Object(x.jsx)(l.a,{path:"/prit-sentry-list",element:Object(x.jsx)(k,{})}),Object(x.jsx)(l.a,{path:"/prit-sentry-edit",element:Object(x.jsx)(k,{edit:!0})})]})})})},D=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,174)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),n(e),a(e),r(e),c(e)}))};c.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(C,{})}),document.getElementById("root")),D()},94:function(e,t,s){}},[[169,1,2]]]);
//# sourceMappingURL=main.5c3e781c.chunk.js.map