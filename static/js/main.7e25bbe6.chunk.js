(this.webpackJsonpsentry=this.webpackJsonpsentry||[]).push([[0],{110:function(e,t){},112:function(e,t){},142:function(e,t){},168:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),i=n(84),r=n.n(i),c=(n(91),n(85)),l=n(2),o=n(9),d=n.n(o),u=n(45),j=n(8),h=(n(93),n(170)),b=n(171),p=n(172),f=n(173),m={row1BgGrey:{backgroundColor:"#eeeeee",padding:2,margin:8,minWidth:1e3},rowTitle:{width:"100%",height:"40%",backgroundColor:"#dddddd"},title:{heigth:"40%",padding:2,marginLeft:10,fontSize:28,textAlign:"left",alignItems:"left",color:"rgb(61, 116, 219)"},subtitle:{width:"100%",height:"30%",backgroundColor:"#dedede"},textSubtitle:{heigth:"20%",paddingLeft:20,textAlign:"left",whiteSpace:"nowrap",overflow:"hidden",color:"rgb(119, 101, 137)"},rowError:{heigth:"30%",padding:2,margin:0,textAlign:"left",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden"},col2:{},colTitle:{width:"100%",padding:0,marginLeft:10,fontSize:14,textAlign:"center"},rowValue:{padding:0,margin:0,fontSize:14,textAlign:"center"}},x=n(1),g=function(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),a=t[0],i=t[1],r=Object(s.useState)([]),c=Object(j.a)(r,2),l=c[0],o=(c[1],Object(s.useState)([])),g=Object(j.a)(o,2),O=g[0],v=g[1],y=Object(s.useState)(null),w=Object(j.a)(y,2),S=w[0],I=w[1],k=m.row1BgGrey,C=m.rowTitle,_=m.title,A=m.subtitle,N=m.textSubtitle,L=m.rowError,E=m.col2,F=m.colTitle,T=m.rowValue,D=n(95);Object(s.useEffect)((function(){S&&(D.initialize("AOIkbVtbBP9IfqV80DyYBCNul4DYR03MNcikFamg",S),D.serverURL="https://parseapi.back4app.com/")}),[S]);var B=function(){var e=Object(u.a)(d.a.mark((function e(){var t,n,s,a,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:null,t=D.Object.extend("issuesList"),n=new D.Query(t),e.prev=3,e.next=6,n.find();case 6:s=e.sent,a=U(s),i(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("Error while fetching issuesList",e.t0);case 14:case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){B()}),[D,S]);var U=function(e){return JSON.parse(JSON.stringify(e))},z=function(){return Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Insira o dbKey"}),Object(x.jsx)("textarea",{style:{width:"90%",textAlign:"center",margin:20,marginLeft:60},className:"form-control",rows:"1",onChange:function(e){40===e.target.value.length&&I(e.target.value)}})]})},J=function(){return Object(x.jsx)(h.a,{children:a.sort((function(e,t){return new Date(t.lastSeen)-new Date(e.lastSeen)})).map((function(e,t){var n,s,a,i,r,c,l;return Object(x.jsxs)(b.a,{style:k,children:[Object(x.jsxs)(p.a,{style:{minWidth:"60%"},children:[Object(x.jsx)(b.a,{style:C,children:Object(x.jsx)("text",{style:_,children:"".concat((null===(n=e.metadata)||void 0===n?void 0:n.type)?null===(s=e.metadata)||void 0===s?void 0:s.type:"<Unknown>")})}),Object(x.jsx)(b.a,{style:A,children:Object(x.jsx)("text",{style:N,children:e.culprit})}),Object(x.jsx)(b.a,{style:L,children:null===(a=e.metadata)||void 0===a?void 0:a.value})]}),Object(x.jsxs)(p.a,{style:E,children:[Object(x.jsx)(b.a,{style:{width:"100%",height:"40%"},children:Object(x.jsx)("text",{style:F,children:Object(x.jsx)("b",{children:"Primeira"})})}),Object(x.jsx)(b.a,{style:T,children:"".concat(null===(i=e.firstSeen)||void 0===i?void 0:i.substr(0,10)," \n ").concat(null===(r=e.firstSeen)||void 0===r?void 0:r.substr(11,5),"h")})]}),Object(x.jsxs)(p.a,{style:E,children:[Object(x.jsx)(b.a,{style:{width:"100%",height:"40%"},children:Object(x.jsx)("text",{style:F,children:Object(x.jsx)("b",{children:"\xdaltima"})})}),Object(x.jsx)(b.a,{style:T,children:"".concat(null===(c=e.lastSeen)||void 0===c?void 0:c.substr(0,10)," \n ").concat(null===(l=e.lastSeen)||void 0===l?void 0:l.substr(11,5),"h")})]}),Object(x.jsxs)(p.a,{style:E,children:[Object(x.jsx)(b.a,{style:{width:"100%",height:"40%"},children:Object(x.jsx)("text",{style:F,children:Object(x.jsx)("b",{children:"All Users"})})}),Object(x.jsx)(b.a,{style:T,children:"".concat(e.userCount)})]}),Object(x.jsxs)(p.a,{style:E,children:[Object(x.jsx)(b.a,{style:{width:"100%",height:"40%"},children:Object(x.jsx)("text",{style:F,children:Object(x.jsx)("b",{children:"All Events"})})}),Object(x.jsx)(b.a,{style:T,children:"".concat(e.count)})]}),Object(x.jsx)(f.a,{variant:"primary",href:e.permalink,children:"Ver no Sentry"})]})}))})},P=function(){return Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"exampleFormControlTextarea1",href:"https://sentry.io/api/0/projects/prit-app/prit-app-business/issues/",children:"New Json from https://sentry.io/api/0/projects/prit-app/prit-app-business/issues/"}),Object(x.jsx)("textarea",{style:{width:"90%",textAlign:"center",margin:20,marginLeft:60},className:"form-control",id:"exampleFormControlTextarea1",rows:"1",onChange:function(e){v(JSON.parse(e.target.value))}})]})};Object(s.useEffect)((function(){!!(0===O.length||Array.isArray(O)&&O.length>0&&O[0].id)||v([])}),[O]);var V=function(){var e=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=function(){var e=Object(u.a)(d.a.mark((function e(n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.save();case 3:s=e.sent,console.log("New object created with objectId: "+s),t++,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("Failed to create new object, with error code: "+e.t0.message);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();try{l.forEach((function(e){if(e.updated){var t,s=new D.Object("issuesList");s.set("id",e.objectId||null),s.set("issueId",e.issueId),s.set("shareId",e.shareId),s.set("shortId",e.shortId),s.set("title",e.title),s.set("culprit",e.culprit),s.set("permalink",e.permalink),s.set("logger",e.logger),s.set("level",e.level),s.set("status",e.status),s.set("statusDetails",e.statusDetails),s.set("isPublic",e.isPublic),s.set("platform",e.platform),s.set("projectName",(null===(t=e.project)||void 0===t?void 0:t.name)||""),s.set("type",e.type),s.set("numComments",e.numComments),s.set("assignedTo",e.assignedTo),s.set("isBookmarked",e.isBookmarked),s.set("isSubscribed",e.isSubscribed),s.set("subscriptionDetails",e.subscriptionDetails),s.set("hasSeen",e.hasSeen),s.set("annotations",e.annotations),s.set("isUnhandled",e.isUnhandled),s.set("count",e.count),s.set("userCount",e.userCount),s.set("firstSeen",e.firstSeen),s.set("lastSeen",e.lastSeen),s.set("stats",e.stats),s.set("metadata",{value:e.metadata.value,type:e.metadata.type,filename:e.metadata.filename,function:e.metadata.function,display_title_with_tree_label:e.metadata.display_title_with_tree_label}),n(s)}}))}catch(s){console.log("erro",s)}alert("".concat(t," issues atualizados com sucesso!"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{style:{width:"100%",textAlign:"center",padding:20},children:[Object(x.jsx)("h1",{children:"Issues from Sentry"}),!S&&Object(x.jsx)(z,{}),S&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h4",{children:["Updated at ","01/01 - 00:00h"]}),Object(x.jsx)(J,{}),Object(x.jsx)(P,{}),Object(x.jsx)(f.a,{variant:"primary",onClick:function(){return function(){var e,t=O,n=U(a);t.forEach((function(e,t){var s=n.findIndex((function(t){return t.issueId===e.id}));console.log("".concat(t," - issue Id: ").concat(e.id," / duplicado: ").concat(-1!==s," new: ").concat(e.lastSeen," old: ").concat(-1!==s?n[s].lastSeen:"")),-1!==s&&e.lastSeen===n[s].lastSeen?(n[s].updated=!1,n.splice(s,1),console.log("updated false")):(console.log("updated true - novo"),e.updated=!0,-1!==s&&(console.log("updated true  - atualizado"),e.objectId=n[s].objectId,n.splice(s,1)),n.push(e))})),e=l,n.forEach((function(t){var n,s=t.attributes?t.attributes:t;e.push({objectId:t.objectId||"",issueId:s.issueId||s.id,title:s.title,culprit:s.culprit,permalink:s.permalink,level:s.level,platform:s.platform,projectName:(null===(n=s.project)||void 0===n?void 0:n.name)||"",type:s.type,metadata:{value:s.metadata.value,type:s.metadata.type,filename:s.metadata.filename,function:s.metadata.function,display_title_with_tree_label:s.metadata.display_title_with_tree_label},hasSeen:s.hasSeen,isUnhandled:s.isUnhandled,count:s.count,userCount:s.userCount,firstSeen:s.firstSeen,lastSeen:s.lastSeen,updated:s.updated})}))}()},children:"Comparar"}),Object(x.jsx)(f.a,{variant:"primary",onClick:function(){return V()},children:"Save Issues List"})]})]})},O=function(){return Object(x.jsx)(c.a,{children:Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(l.c,{children:[Object(x.jsx)(l.a,{path:"/",element:Object(x.jsx)(g,{})}),Object(x.jsx)(l.a,{path:"/issues",element:Object(x.jsx)(g,{})}),Object(x.jsx)(l.a,{path:"/prit-sentry",element:Object(x.jsx)(g,{})})]})})})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,174)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),s(e),a(e),i(e),r(e)}))};r.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(O,{})}),document.getElementById("root")),v()},91:function(e,t,n){}},[[168,1,2]]]);
//# sourceMappingURL=main.7e25bbe6.chunk.js.map